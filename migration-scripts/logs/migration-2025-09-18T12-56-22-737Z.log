2025-09-18T12:56:22.738Z INFO  [LOGGER] Migration logger initialized | {"logFile":"D:\\Websites\\vostudiofinder\\migration-scripts\\logs\\migration-2025-09-18T12-56-22-737Z.log"}
2025-09-18T12:56:22.842Z INFO  [PHASE] ðŸš€ Starting Database Cleanup | {"description":"Removing all existing data while preserving schema"}
2025-09-18T12:56:23.408Z INFO  [CLEANUP] Initial Database Counts | {"users":62,"user_profiles":62,"user_metadata":2442,"accounts":0,"sessions":0,"studios":62,"studio_images":175,"studio_services":27,"reviews":0,"review_responses":0,"messages":0,"user_connections":194,"subscriptions":0,"saved_searches":0,"pending_subscriptions":0,"refunds":0,"notifications":0,"content_reports":0}
2025-09-18T12:56:23.410Z INFO  [CLEANUP] Deleting data in dependency order...
2025-09-18T12:56:23.411Z INFO  [CLEANUP] Deleting all records from review_responses...
2025-09-18T12:56:23.490Z WARN  [CLEANUP] Could not get count for review_responses | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.491Z INFO  [CLEANUP] review_responses is already empty
2025-09-18T12:56:23.492Z INFO  [CLEANUP] Deleting all records from reviews...
2025-09-18T12:56:23.510Z WARN  [CLEANUP] Could not get count for reviews | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.511Z INFO  [CLEANUP] reviews is already empty
2025-09-18T12:56:23.512Z INFO  [CLEANUP] Deleting all records from studio_services...
2025-09-18T12:56:23.524Z WARN  [CLEANUP] Could not get count for studio_services | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.524Z INFO  [CLEANUP] studio_services is already empty
2025-09-18T12:56:23.525Z INFO  [CLEANUP] Deleting all records from studio_images...
2025-09-18T12:56:23.540Z WARN  [CLEANUP] Could not get count for studio_images | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.541Z INFO  [CLEANUP] studio_images is already empty
2025-09-18T12:56:23.542Z INFO  [CLEANUP] Deleting all records from notifications...
2025-09-18T12:56:23.554Z WARN  [CLEANUP] Could not get count for notifications | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.555Z INFO  [CLEANUP] notifications is already empty
2025-09-18T12:56:23.556Z INFO  [CLEANUP] Deleting all records from messages...
2025-09-18T12:56:23.569Z WARN  [CLEANUP] Could not get count for messages | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.570Z INFO  [CLEANUP] messages is already empty
2025-09-18T12:56:23.570Z INFO  [CLEANUP] Deleting all records from user_connections...
2025-09-18T12:56:23.582Z WARN  [CLEANUP] Could not get count for user_connections | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.583Z INFO  [CLEANUP] user_connections is already empty
2025-09-18T12:56:23.583Z INFO  [CLEANUP] Deleting all records from saved_searches...
2025-09-18T12:56:23.594Z WARN  [CLEANUP] Could not get count for saved_searches | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.595Z INFO  [CLEANUP] saved_searches is already empty
2025-09-18T12:56:23.595Z INFO  [CLEANUP] Deleting all records from content_reports...
2025-09-18T12:56:23.607Z WARN  [CLEANUP] Could not get count for content_reports | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.608Z INFO  [CLEANUP] content_reports is already empty
2025-09-18T12:56:23.608Z INFO  [CLEANUP] Deleting all records from refunds...
2025-09-18T12:56:23.621Z WARN  [CLEANUP] Could not get count for refunds | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.622Z INFO  [CLEANUP] refunds is already empty
2025-09-18T12:56:23.623Z INFO  [CLEANUP] Deleting all records from pending_subscriptions...
2025-09-18T12:56:23.634Z WARN  [CLEANUP] Could not get count for pending_subscriptions | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.635Z INFO  [CLEANUP] pending_subscriptions is already empty
2025-09-18T12:56:23.635Z INFO  [CLEANUP] Deleting all records from subscriptions...
2025-09-18T12:56:23.649Z WARN  [CLEANUP] Could not get count for subscriptions | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.649Z INFO  [CLEANUP] subscriptions is already empty
2025-09-18T12:56:23.650Z INFO  [CLEANUP] Deleting all records from user_metadata...
2025-09-18T12:56:23.662Z WARN  [CLEANUP] Could not get count for user_metadata | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.663Z INFO  [CLEANUP] user_metadata is already empty
2025-09-18T12:56:23.663Z INFO  [CLEANUP] Deleting all records from studios...
2025-09-18T12:56:23.674Z WARN  [CLEANUP] Could not get count for studios | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.675Z INFO  [CLEANUP] studios is already empty
2025-09-18T12:56:23.676Z INFO  [CLEANUP] Deleting all records from user_profiles...
2025-09-18T12:56:23.689Z WARN  [CLEANUP] Could not get count for user_profiles | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.689Z INFO  [CLEANUP] user_profiles is already empty
2025-09-18T12:56:23.690Z INFO  [CLEANUP] Deleting all records from sessions...
2025-09-18T12:56:23.701Z WARN  [CLEANUP] Could not get count for sessions | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.701Z INFO  [CLEANUP] sessions is already empty
2025-09-18T12:56:23.702Z INFO  [CLEANUP] Deleting all records from accounts...
2025-09-18T12:56:23.713Z WARN  [CLEANUP] Could not get count for accounts | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.714Z INFO  [CLEANUP] accounts is already empty
2025-09-18T12:56:23.714Z INFO  [CLEANUP] Deleting all records from users...
2025-09-18T12:56:23.730Z WARN  [CLEANUP] Could not get count for users | {"error":"\nInvalid `prisma.$queryRaw()` invocation:\n\n\nRaw query failed. Code: `42601`. Message: `ERROR: syntax error at or near \"$1\"`"}
2025-09-18T12:56:23.731Z INFO  [CLEANUP] users is already empty
2025-09-18T12:56:23.923Z INFO  [CLEANUP] Final Database Counts | {"users":62,"user_profiles":62,"user_metadata":2442,"accounts":0,"sessions":0,"studios":62,"studio_images":175,"studio_services":27,"reviews":0,"review_responses":0,"messages":0,"user_connections":194,"subscriptions":0,"saved_searches":0,"pending_subscriptions":0,"refunds":0,"notifications":0,"content_reports":0}
2025-09-18T12:56:23.924Z WARN  [CLEANUP] Some records remain after cleanup: 3024 total | {"users":62,"user_profiles":62,"user_metadata":2442,"accounts":0,"sessions":0,"studios":62,"studio_images":175,"studio_services":27,"reviews":0,"review_responses":0,"messages":0,"user_connections":194,"subscriptions":0,"saved_searches":0,"pending_subscriptions":0,"refunds":0,"notifications":0,"content_reports":0}
2025-09-18T12:56:23.924Z INFO  [PHASE] âœ… Completed Database Cleanup | {"initialTotal":3024,"finalTotal":3024,"success":false}
2025-09-18T12:56:23.925Z INFO  [CLEANUP] Verifying database schema integrity...
2025-09-18T12:56:23.967Z INFO  [CLEANUP] âœ… Schema verification passed - 18 tables found
2025-09-18T12:56:24.033Z INFO  [CLEANUP] âœ… Schema functionality test passed
